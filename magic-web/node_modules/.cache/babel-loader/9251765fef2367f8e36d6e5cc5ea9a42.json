{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\mtp8\\\\source\\\\repos\\\\Magic\\\\magic-web\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\mtp8\\\\source\\\\repos\\\\Magic\\\\magic-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\mtp8\\\\source\\\\repos\\\\Magic\\\\magic-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\mtp8\\\\source\\\\repos\\\\Magic\\\\magic-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _createSuper from\"C:\\\\Users\\\\mtp8\\\\source\\\\repos\\\\Magic\\\\magic-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\mtp8\\\\source\\\\repos\\\\Magic\\\\magic-web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import UserStore from'./Store/UserStore';import LoginForm from'./LoginForm';import InputField from'./InputField';import SubmitButton from'./SubmitButton';import{observer}from'mobx-react';import'./App.css';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){_classCallCheck(this,App);return _super.apply(this,arguments);}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/isLoggedIn',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){UserStore.loading=false;UserStore.isLoggedIn=true;UserStore.userName=result.username;}else{UserStore.loading=false;UserStore.isLoggedIn=false;}_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);UserStore.loading=false;UserStore.isLoggedIn=false;case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"doLogout\",value:function(){var _doLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('/logout',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:result=_context2.sent;if(result&&result.success){UserStore.userName='';UserStore.isLoggedIn=false;}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));function doLogout(){return _doLogout.apply(this,arguments);}return doLogout;}()},{key:\"render\",value:function render(){var _this=this;if(UserStore.loading){return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},\"loading, please wait...\"));}else{if(UserStore.isLoggedIn){return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},\"Welcome \",UserStore.uyserName,/*#__PURE__*/React.createElement(SubmitButton,{text:'log out',disabled:false,onClick:function onClick(){return _this.doLogout();}})));}return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(LoginForm,null)));}}}]);return App;}(React.Component);export default observer(App);","map":{"version":3,"sources":["C:/Users/mtp8/source/repos/Magic/magic-web/src/App.js"],"names":["React","UserStore","LoginForm","InputField","SubmitButton","observer","App","fetch","method","headers","res","json","result","success","loading","isLoggedIn","userName","username","console","log","uyserName","doLogout","Component"],"mappings":"ixBAAA,MAAOA,CAAAA,KAAP,KAAyB,OAAzB,CACA,MAAOC,CAAAA,SAAP,KAAyB,mBAAzB,CACA,MAAOC,CAAAA,SAAP,KAAyB,aAAzB,CACA,MAAOC,CAAAA,UAAP,KAAyB,cAAzB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,MAAO,WAAP,C,GAEMC,CAAAA,G,ufAKgBC,CAAAA,KAAK,CAAC,aAAD,CAAe,CAClCC,MAAM,CAAE,MAD0B,CAElCC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAFyB,CAAf,C,QAAjBC,G,qCAQeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,eAEJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA6B,CAC3BZ,SAAS,CAACa,OAAV,CAAoB,KAApB,CACAb,SAAS,CAACc,UAAV,CAAuB,IAAvB,CACAd,SAAS,CAACe,QAAV,CAAqBJ,MAAM,CAACK,QAA5B,CACD,CAJD,IAKI,CACFhB,SAAS,CAACa,OAAV,CAAoB,KAApB,CACAb,SAAS,CAACc,UAAV,CAAuB,KAAvB,CACD,C,iFAGDG,OAAO,CAACC,GAAR,cACAlB,SAAS,CAACa,OAAV,CAAoB,KAApB,CACAb,SAAS,CAACc,UAAV,CAAuB,KAAvB,C,0dAMgBR,CAAAA,KAAK,CAAC,SAAD,CAAW,CAC9BC,MAAM,CAAE,MADsB,CAE9BC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAFqB,CAAX,C,QAAjBC,G,uCAQeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,gBAEJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA6B,CAC3BZ,SAAS,CAACe,QAAV,CAAqB,EAArB,CACAf,SAAS,CAACc,UAAV,CAAuB,KAAvB,CACD,C,qFAGCG,OAAO,CAACC,GAAR,e,gMAIE,gBACN,GAAIlB,SAAS,CAACa,OAAd,CAAsB,CACpB,mBACE,2BAAK,SAAS,CAAG,KAAjB,eACE,2BAAK,SAAS,CAAC,WAAf,4BADF,CADF,CAOD,CARD,IASI,CACF,GAAGb,SAAS,CAACc,UAAb,CAAwB,CACtB,mBACE,2BAAK,SAAS,CAAG,KAAjB,eACE,2BAAK,SAAS,CAAC,WAAf,aACWd,SAAS,CAACmB,SADrB,cAEE,oBAAC,YAAD,EACE,IAAI,CAAI,SADV,CAEE,QAAQ,CAAI,KAFd,CAGE,OAAO,CAAK,yBAAM,CAAA,KAAI,CAACC,QAAL,EAAN,EAHd,EAFF,CADF,CADF,CAYD,CACD,mBACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,oBAAC,SAAD,MADF,CADF,CADF,CAOD,CACF,C,iBAvFerB,KAAK,CAACsB,S,EA0FxB,cAAejB,CAAAA,QAAQ,CAACC,GAAD,CAAvB","sourcesContent":["import React        from 'react';\nimport UserStore    from './Store/UserStore';\nimport LoginForm    from './LoginForm';\nimport InputField   from './InputField';\nimport SubmitButton from './SubmitButton';\nimport { observer } from 'mobx-react';\nimport './App.css';\n\nclass App extends React.Component{\n\n  async componentDidMount(){\n\n    try {\n      let res = await fetch('/isLoggedIn',{\n        method: 'post',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        }\n      });\n\n      let result = await res.json();\n      \n      if (result && result.success){\n        UserStore.loading = false;\n        UserStore.isLoggedIn = true;\n        UserStore.userName = result.username;\n      }\n      else{\n        UserStore.loading = false;\n        UserStore.isLoggedIn = false;\n      }\n    }\n    catch(e){\n      console.log(e)\n      UserStore.loading = false;\n      UserStore.isLoggedIn = false;\n    }\n  }\n\n  async doLogout(){\n    try {\n      let res = await fetch('/logout',{\n        method: 'post',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        }\n      });\n\n      let result = await res.json();\n      \n      if (result && result.success){\n        UserStore.userName = '';\n        UserStore.isLoggedIn = false;\n      }\n    }\n    catch(e){\n        console.log(e)\n    }\n  }\n\n  render(){\n    if (UserStore.loading){\n      return (\n        <div className = \"app\">\n          <div className='container'>               \n            loading, please wait...\n          </div>\n        </div>\n      );\n    }\n    else{\n      if(UserStore.isLoggedIn){\n        return (\n          <div className = \"app\">\n            <div className='container'>\n              Welcome {UserStore.uyserName}\n              <SubmitButton\n                text = {'log out'}\n                disabled = {false}\n                onClick = { () => this.doLogout() }\n              />\n            </div>\n          </div>\n        );\n      }\n      return (\n        <div className=\"app\">\n          <div className='container'>\n            <LoginForm />\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default observer(App);\n"]},"metadata":{},"sourceType":"module"}