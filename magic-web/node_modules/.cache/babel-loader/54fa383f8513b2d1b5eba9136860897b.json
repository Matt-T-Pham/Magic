{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mtp8\\\\source\\\\repos\\\\Magic\\\\magic-web\\\\src\\\\App.js\";\nimport React from 'react';\nimport UserStore from './Store/UserStore';\nimport LoginForm from './LoginForm';\nimport InputField from './InputField';\nimport SubmitButton from './SubmitButton';\nimport './App.css';\n\nclass App extends React.Component {\n  async componentDidMount() {\n    try {\n      let res = await fetch('/isLoggedIn', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-type': 'application/json'\n        }\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = true;\n        userStore.username = result.username;\n      } else {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = false;\n      }\n    } catch (e) {\n      userStore.loading = false;\n      UserStore.isLoggedIn = false;\n    }\n  }\n\n  async doLogout() {\n    try {\n      let res = await fetch('/logout', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-type': 'application/json'\n        }\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        userStore.username = '';\n        UserStore.isLoggedIn = False;\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  render() {\n    if (UserStore.loading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }\n      }, \"loading, please wait...\"));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, \"Hello world\");\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/mtp8/source/repos/Magic/magic-web/src/App.js"],"names":["React","UserStore","LoginForm","InputField","SubmitButton","App","Component","componentDidMount","res","fetch","method","headers","result","json","success","loading","isLoggedIn","userStore","username","e","doLogout","False","console","log","render"],"mappings":";AAAA,OAAOA,KAAP,MAAyB,OAAzB;AACA,OAAOC,SAAP,MAAyB,mBAAzB;AACA,OAAOC,SAAP,MAAyB,aAAzB;AACA,OAAOC,UAAP,MAAyB,cAAzB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAO,WAAP;;AAEA,MAAMC,GAAN,SAAkBL,KAAK,CAACM,SAAxB,CAAiC;AAE/B,QAAMC,iBAAN,GAAyB;AACvB,QAAI;AAEF,UAAIC,GAAG,GAAG,MAAMC,KAAK,CAAC,aAAD,EAAe;AAClCC,QAAAA,MAAM,EAAE,MAD0B;AAElCC,QAAAA,OAAO,EAAE;AACL,oBAAU,kBADL;AAEL,0BAAgB;AAFX;AAFyB,OAAf,CAArB;AAQA,UAAIC,MAAM,GAAG,MAAMJ,GAAG,CAACK,IAAJ,EAAnB;;AAEA,UAAID,MAAM,IAAIA,MAAM,CAACE,OAArB,EAA6B;AAC3Bb,QAAAA,SAAS,CAACc,OAAV,GAAoB,KAApB;AACAd,QAAAA,SAAS,CAACe,UAAV,GAAuB,IAAvB;AACAC,QAAAA,SAAS,CAAEC,QAAX,GAAsBN,MAAM,CAACM,QAA7B;AACD,OAJD,MAKI;AACFjB,QAAAA,SAAS,CAACc,OAAV,GAAoB,KAApB;AACAd,QAAAA,SAAS,CAACe,UAAV,GAAuB,KAAvB;AACD;AACF,KArBD,CAsBA,OAAMG,CAAN,EAAQ;AACNF,MAAAA,SAAS,CAACF,OAAV,GAAoB,KAApB;AACAd,MAAAA,SAAS,CAACe,UAAV,GAAuB,KAAvB;AACD;AACF;;AAED,QAAMI,QAAN,GAAgB;AACd,QAAI;AACF,UAAIZ,GAAG,GAAG,MAAMC,KAAK,CAAC,SAAD,EAAW;AAC9BC,QAAAA,MAAM,EAAE,MADsB;AAE9BC,QAAAA,OAAO,EAAE;AACL,oBAAU,kBADL;AAEL,0BAAgB;AAFX;AAFqB,OAAX,CAArB;AAQA,UAAIC,MAAM,GAAG,MAAMJ,GAAG,CAACK,IAAJ,EAAnB;;AAEA,UAAID,MAAM,IAAIA,MAAM,CAACE,OAArB,EAA6B;AAC3BG,QAAAA,SAAS,CAACC,QAAV,GAAqB,EAArB;AACAjB,QAAAA,SAAS,CAACe,UAAV,GAAuBK,KAAvB;AAED;AACF,KAhBD,CAiBA,OAAMF,CAAN,EAAQ;AACJG,MAAAA,OAAO,CAACC,GAAR,CAAYJ,CAAZ;AACH;AACF;;AAEDK,EAAAA,MAAM,GAAE;AACN,QAAIvB,SAAS,CAACc,OAAd,EAAsB;AACpB,0BACE;AAAK,QAAA,SAAS,EAAG,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADF,CADF;AAQD;;AACD,wBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF;AAMD;;AAvE8B;;AA0EjC,eAAeV,GAAf","sourcesContent":["import React        from 'react';\nimport UserStore    from './Store/UserStore';\nimport LoginForm    from './LoginForm';\nimport InputField   from './InputField';\nimport SubmitButton from './SubmitButton';\nimport './App.css';\n\nclass App extends React.Component{\n\n  async componentDidMount(){\n    try {\n\n      let res = await fetch('/isLoggedIn',{\n        method: 'post',\n        headers: {\n            'Accept': 'application/json',\n            'Content-type': 'application/json'\n        }\n      });\n\n      let result = await res.json();\n      \n      if (result && result.success){\n        UserStore.loading = false;\n        UserStore.isLoggedIn = true;\n        userStore. username = result.username;\n      }\n      else{\n        UserStore.loading = false;\n        UserStore.isLoggedIn = false;\n      }\n    }\n    catch(e){\n      userStore.loading = false;\n      UserStore.isLoggedIn = false;\n    }\n  }\n\n  async doLogout(){\n    try {\n      let res = await fetch('/logout',{\n        method: 'post',\n        headers: {\n            'Accept': 'application/json',\n            'Content-type': 'application/json'\n        }\n      });\n\n      let result = await res.json();\n      \n      if (result && result.success){\n        userStore.username = '';\n        UserStore.isLoggedIn = False;\n\n      }\n    }\n    catch(e){\n        console.log(e)\n    }\n  }\n\n  render(){\n    if (UserStore.loading){\n      return (\n        <div className = \"app\">\n          <div className='container'>\n            loading, please wait...\n          </div>\n        </div>\n  \n      );\n    }\n    return (\n      <div className=\"App\">\n        Hello world\n      </div>\n    );\n\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}